---
title: "Multiple Reports R-Markdown"
output:
  pdf_document: default
params: 
  species: 0
---

```{r}
# Packages we will use
library(dplyr)
library(ggplot2)

# a. Build a summary table
iris %>%
  # a1. Filter the dataset by an specific species:
  filter(Species == params$species) %>% 
  
  # a2. Buld the summary table
  group_by(Species) %>%
  summarise(across(Sepal.Length:Petal.Length,~mean(.))) %>% 
  
  # a3. Reformat the table with "knitr::kable()"
  knitr::kable()
```

```{r}
# b. Create a ggplot2 graph
p <- iris %>%
  # b1. Filter the dataset by an specific species:
  filter(Species == params$species) %>% 
  
  # b2. Create a plot
  ggplot(aes(Sepal.Length)) +
  geom_density(fill = "cyan4", alpha = .6) +
  theme_minimal() +
  theme(text = element_text(family = "serif"),
        plot.title = element_text(hjust = .5)) +
  labs(title = paste0(params$species, "'s sepal length"))

# b3. Save the plot with ggsave as a ".png" figure
ggsave("plot.png", p, height = 3, width = 4)

# b4. Import it with knitr::include_graphics()
knitr::include_graphics("plot.png")
```
